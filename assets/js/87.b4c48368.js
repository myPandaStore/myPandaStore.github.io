(window.webpackJsonp=window.webpackJsonp||[]).push([[87],{709:function(_,v,t){"use strict";t.r(v);var s=t(15),a=Object(s.a)({},(function(){var _=this,v=_.$createElement,t=_._self._c||v;return t("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[t("h2",{attrs:{id:"_1-dns-协议是什么"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-dns-协议是什么"}},[_._v("#")]),_._v(" 1.DNS 协议是什么")]),_._v(" "),t("p",[t("strong",[_._v("概念")]),_._v("： DNS 是域名系统 (Domain Name System) 的缩写，提供的是一种主机名到 IP 地址的转换服务，就是我们常说的域名系统。它是一个由分层的 DNS 服务器组成的分布式数据库，是定义了主机如何查询这个分布式数据库的方式的应用层协议。能够使人更方便的访问互联网，而不用去记住能够被机器直接读取的IP数串。")]),_._v(" "),t("p",[t("strong",[_._v("作用")]),_._v("： 将域名解析为IP地址，客户端向DNS服务器（DNS服务器有自己的IP地址）发送域名查询请求，DNS服务器告知客户机Web服务器的 IP 地址。")]),_._v(" "),t("h2",{attrs:{id:"_2-dns同时使用tcp和udp协议"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-dns同时使用tcp和udp协议"}},[_._v("#")]),_._v(" 2.DNS同时使用TCP和UDP协议？")]),_._v(" "),t("p",[_._v("DNS占用53号端口，同时使用TCP和UDP协议。")]),_._v(" "),t("p",[_._v("(1) 在区域传输的时候使用TCP协议")]),_._v(" "),t("ul",[t("li",[_._v("辅域名服务器会定时（一般3小时）向主域名服务器进行查询以便了解数据是否有变动。如有变动，会执行一次区域传送，进行数据同步。区域传送使用TCP而不是UDP，因为数据同步传送的数据量比一个请求应答的数据量要多得多。")]),_._v(" "),t("li",[_._v("TCP是一种可靠连接，保证了数据的准确性。")])]),_._v(" "),t("p",[_._v("(2) 在域名解析的时候使用UDP协议")]),_._v(" "),t("ul",[t("li",[_._v("客户端向DNS服务器查询域名，一般返回的内容都不超过512字节，用UDP传输即可。不用经过三次握手，这样DNS服务器负载更低，响应更快。理论上说，客户端也可以指定向DNS服务器查询时用TCP，但事实上，很多DNS服务器进行配置的时候，仅支持UDP查询包。")])]),_._v(" "),t("h2",{attrs:{id:"_3-dns完整的查询过程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-dns完整的查询过程"}},[_._v("#")]),_._v(" 3.DNS完整的查询过程")]),_._v(" "),t("ul",[t("li",[_._v("首先会在浏览器的缓存中查找对应的IP地址，如果查找到直接返回，若找不到继续下一步")]),_._v(" "),t("li",[_._v("将请求发送给本地DNS服务器，在本地域名服务器缓存中查询，如果查找到，就直接将查找结果返回，若找不到继续下一步")]),_._v(" "),t("li",[_._v("本地DNS服务器向根域名服务器发送请求，根域名服务器会返回一个所查询域的顶级域名服务器地址")]),_._v(" "),t("li",[_._v("本地DNS服务器向顶级域名服务器发送请求，接受请求的服务器查询自己的缓存，如果有记录，就返回查询结果，如果没有就返回相关的下一级的权威域名服务器的地址")]),_._v(" "),t("li",[_._v("本地DNS服务器向权威域名服务器发送请求，域名服务器返回对应的结果")]),_._v(" "),t("li",[_._v("本地DNS服务器将返回结果保存在缓存中，便于下次使用")]),_._v(" "),t("li",[_._v("本地DNS服务器将返回结果返回给浏览器")])]),_._v(" "),t("h2",{attrs:{id:"_4-迭代查询与递归查询"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-迭代查询与递归查询"}},[_._v("#")]),_._v(" 4.迭代查询与递归查询")]),_._v(" "),t("p",[_._v("实际上，DNS解析是一个包含迭代查询和递归查询的过程。")]),_._v(" "),t("ul",[t("li",[t("strong",[_._v("递归查询")]),_._v("指的是查询请求发出后，域名服务器代为向下一级域名服务器发出请求，最后向用户返回查询的最终结果。使用递归 查询，用户只需要发出一次查询请求。")]),_._v(" "),t("li",[t("strong",[_._v("迭代查询")]),_._v("指的是查询请求后，域名服务器返回单次查询的结果。下一级的查询由用户自己请求。使用迭代查询，用户需要发出 多次的查询请求。")])]),_._v(" "),t("p",[_._v("一般我们向本地 DNS 服务器发送请求的方式就是递归查询，因为我们只需要发出一次请求，然后本地 DNS 服务器返回给我 们最终的请求结果。而本地 DNS 服务器向其他域名服务器请求的过程是迭代查询的过程，因为每一次域名服务器只返回单次 查询的结果，下一级的查询由本地 DNS 服务器自己进行。")])])}),[],!1,null,null,null);v.default=a.exports}}]);